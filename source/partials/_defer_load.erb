<script type="text/javascript">
  (function() {
    // Stylesheets
    function loadStylesheet(url) {
      var stylesheet = document.createElement("link");
      stylesheet.type = "text/css";
      stylesheet.rel = "stylesheet";
      stylesheet.href = url;
      document.getElementsByTagName("head")[0].appendChild(stylesheet);
    }

    function loadAllStylesheets() {
      stylesheets = ["<%= asset_path(:css, 'main') %>"]
      var i = stylesheets.length;
      while (i--) loadStylesheet(stylesheets[i]);
    };

    var requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;

    if (requestAnimationFrame) {
       requestAnimationFrame(loadAllStylesheets);
    } else {
      window.addEventListener('load', loadAllStylesheets);
    }

    // Javascripts
    function loadScript(url, callback) {
      var script = document.createElement("script");
      script.type = "text/javascript";
      script.async = true;

      if (script.readyState) { // IE
        script.onreadystatechange = function() {
          if (script.readyState == "loaded" || script.readyState == "complete") {
            script.onreadystatechange = null;
            callback();
          }
        };
      } else { // Others
        script.onload = function() {
          callback();
        };
      }

      script.src = url;
      document.getElementsByTagName("head")[0].appendChild(script);
    }

    loadScript("<%= asset_path(:js, 'main') %>", function(){});
    loadScript("//use.typekit.net/jra4cdq.js", function() {
      try {Typekit.load()} catch(e) {}
    });
  })();
</script>
